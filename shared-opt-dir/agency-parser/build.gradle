plugins {
    id("application") // includes "java" plugin
    alias(libs.plugins.kotlin.jvm)
}

application {
    mainClass = file("parser_class").text
    applicationDefaultJvmArgs = ["-Dfile.encoding=UTF-8"]
}

run {
    standardInput = System.in
}

java {
    sourceCompatibility = rootProject.javaVersion
    targetCompatibility = rootProject.javaVersion
}
compileKotlin {
    kotlinOptions {
        jvmTarget = rootProject.javaVersion
        allWarningsAsErrors = true
    }
}
compileTestKotlin {
    kotlinOptions {
        jvmTarget = rootProject.javaVersion
        allWarningsAsErrors = true
    }
}

dependencies {
    //noinspection DependencyNotationArgument // fixed in AGP 8.3.0 https://issuetracker.google.com/issues/295282939
    implementation(libs.bundles.kotlin)

    implementation(project(":parser"))
}
